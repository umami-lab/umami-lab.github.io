{{ define "main" }} 
  <h1>{{ .Title }}</h1>

  {{- $sectionDelimiter := "<!-- section -->" -}}
  {{- $rawContentSections := split .RawContent $sectionDelimiter -}}
  {{- $sectionCount := len $rawContentSections -}}

  <!-- Conteneur flex pour l'image et les ingrédients -->
  <div id="recipe-container" style="display: flex; justify-content: space-between; gap: 20px; flex-wrap: wrap;">
  
    <!-- Section image -->
    {{- if gt $sectionCount 1 -}}
      <div id="image-container" style="flex: 1; max-width: 48%; display: flex; justify-content: center; align-items: center;">
        {{ index $rawContentSections 0 | .RenderString }}
      </div>
    {{- end -}} <!-- Fermeture du if pour l'image -->

    <!-- Section ingrédients -->
    {{- if ge $sectionCount 2 -}}
      <div id="ingredients-container" style="flex: 1; max-width: 48%; background-color: #f8f8f8; padding: 16px; border: 1px solid #ddd; border-radius: 8px;">
        {{ index $rawContentSections 1 | .RenderString }}
      </div>
    {{- end -}} <!-- Fermeture du if pour les ingrédients -->
  
  </div> <!-- Fermeture du conteneur flex -->

  <!-- Autres sections -->
  {{- if ge $sectionCount 3 -}}
    <div id="section-2">
      {{ index $rawContentSections 2 | .RenderString }}
    </div>
  {{- end -}} <!-- Fermeture du if pour la section 2 -->

  {{- if ge $sectionCount 4 -}}
    <div id="section-3">
      {{ index $rawContentSections 3 | .RenderString }}
    </div>
  {{- end -}} <!-- Fermeture du if pour la section 3 -->

  <!-- Si moins de 2 sections, afficher tout le contenu dans une seule section -->
  {{- if lt $sectionCount 2 -}}
    <div id="content-not-split-into-sections">
      {{ .Content }}
    </div>
  {{- end -}} <!-- Fermeture du if pour les cas où il y a une seule section -->

{{ end }}
