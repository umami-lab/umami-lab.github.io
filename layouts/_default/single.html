{{ define "main" }}
  <h1>{{ .Title }}</h1>

  {{- $sectionDelimiter := "<!-- section -->" -}}
  {{- $rawContentSections := split .RawContent $sectionDelimiter -}}
  {{- $sectionCount := len $rawContentSections -}}

  {{- if gt $sectionCount 1 -}}
    <div id="recipe-layout" style="display: flex; flex-direction: row; align-items: flex-start; gap: 16px;">
      <!-- Image Section -->
      <div id="recipe-image" style="flex: 1; max-width: 300px; flex-shrink: 0;">
        <img src="{{ .Params.image }}" alt="{{ .Title }}" style="width: 100%; border-radius: 8px;">
      </div>

      <!-- Ingredients Section -->
      <div id="ingredients-container" style="flex: 2; background-color: #f8f8f8; padding: 16px; border: 1px solid #ddd; border-radius: 8px;">
        {{ index $rawContentSections 0 | .RenderString }}
      </div>
    </div>

    {{- if ge $sectionCount 2 -}}
      <div id="section-2">
        {{ index $rawContentSections 1 | .RenderString }}
      </div>
    {{- end -}}

    {{- if ge $sectionCount 3 -}}
      <div id="section-3">
        {{ index $rawContentSections 2 | .RenderString }}
      </div>
    {{- end -}}

  {{- else -}}
    <div id="content-not-split-into-sections">
      {{ .Content }}
    </div>
  {{- end -}}

{{ end }}