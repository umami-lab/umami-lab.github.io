{{ define "main" }}
  <!-- Bienvenue et introduction -->
  <h1>Umami-Lab</h1>

  <!-- Liste des recettes -->
  {{ define "main" }}
  <h1>Umami-Lab</h1>

  <!-- Afficher les recettes par catégorie -->
  <div id="categories-list">
      {{ $categories := slice "Entrées" "Plats" "Desserts" "Chine" "France" "USA" "Végétarien" "Non-Végétarien" }}
      
      {{ range $categories }}
          {{ $category := . }}
          {{ $filteredPages := where site.RegularPages "Params.categories" "intersect" (slice $category) }}
          
          {{ if gt (len $filteredPages) 0 }}
              <h2>{{ $category }}</h2>
              <div class="recipes-list">
                  {{ range $filteredPages }}
                      <div class="recipe-card">
                          <a href="{{ .Permalink }}">
                              <h3>{{ .Title }}</h3>
                              <p class="tags">
                                  {{ range .Params.categories }}
                                      <span>{{ . }}</span>
                                  {{ end }}
                              </p>
                          </a>
                      </div>
                  {{ end }}
              </div>
          {{ end }}
      {{ end }}
  </div>

{{ end }}

  <!-- Script de recherche -->
  <script>
      // Fonction de recherche
      function searchRecipes() {
          const searchInput = document.getElementById('searchInput').value.toLowerCase();
          const searchResults = document.getElementById('searchResults');
          
          // Effacer les résultats précédents
          searchResults.innerHTML = '';

          // Trouver tous les fichiers de recettes (fichiers .md dans le dossier content)
          const recipes = document.querySelectorAll('.recipe-card'); // Assume que chaque recette a la classe 'recipe-card'

          // Si aucun texte dans la barre de recherche
          if (!searchInput) {
              return;
          }

          recipes.forEach((recipe) => {
              const title = recipe.querySelector('h2').innerText.toLowerCase();
              const tags = recipe.querySelector('.tags').innerText.toLowerCase();

              if (title.includes(searchInput) || tags.includes(searchInput)) {
                  const li = document.createElement('li');
                  li.innerHTML = `<a href="${recipe.querySelector('a').getAttribute('href')}">${recipe.querySelector('h2').innerText}</a>`;
                  searchResults.appendChild(li);
              }
          });
      }
  </script>

  <!-- Style de la barre de recherche -->
  <style>
      #searchResults {
          list-style: none;
          padding: 0;
          margin-top: 10px;
          background-color: #fff;
          border: 1px solid #ddd;
          border-radius: 4px;
          max-height: 200px;
          overflow-y: auto;
      }

      #searchResults li {
          padding: 8px;
          background-color: #f9f9f9;
          border-bottom: 1px solid #ddd;
      }

      #searchResults li a {
          text-decoration: none;
          color: #007BFF;
      }

      #searchResults li a:hover {
          text-decoration: underline;
      }
  </style>

{{ end }}
